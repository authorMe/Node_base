<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        用户：<input type="text" id="user" value="" /><br />
        密码：<input type="password" id="pass" value="" /><br />
        <input type="button" id="reg_btn" value="注册" />
        <input type="button" id="login_btn" value="登录" />
    </body>
    <script type="text/javascript">
    window.onload = function(){
        var oTxtUser = document.getElementById('user');
        var oTxtPass = document.getElementById('pass');
        var oBtnReg = document.getElementById('reg_btn');
        var oBtnLogin = document.getElementById('login_btn');

        oBtnReg.onClick = function(){
            ajax({
                url:'/user',
                data:{act:'reg',user:oTxtUser.value,pass:oTxtPass.value},
                type:'get',
                success:function(str){
                    var json = eval('('+str+')');
                    if(json.ok){
                        alert('注册成功');
                    }else{
                        alert('注册失败：'+json.msg);
                    }
                },
                error:function(){
                    alert('通信错误');
                }
            })
        }

        oBtnLogin.onClick = function(){
            ajax({
                url:'/user',
                data:{act:'login',user:oTxtUser.value,pass:oTxtPass.value},
                type:'get',
                success:function(str){
                    var json = eval('('+str+')');
                    if(json.ok){
                        alert('登录成功');
                    }else{
                        alert('登录失败：'+json.msg);
                    }
                },
                error:function(){
                    alert('通信错误');
                }
            })
        }
    }
    </script>
</html> 